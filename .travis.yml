language: ruby
cache: bundler
sudo: false
rvm:
    - 2.0
    - 2.4
gemfile:
    - spec/travis/gemfiles/Gemfile-5
    - spec/travis/gemfiles/Gemfile-5.1
env:
    matrix:
        - DB=mysql2
        - DB=postgresql
        - DB=sqlite3
before_script:
    - cp spec/travis/database.travis.yml spec/dummy/config/database.yml
    - mysql -e 'create database travis_ci_test'
    - psql -c 'create database travis_ci_test' -U postgres
script:
    - cd spec/dummy
    - RAILS_ENV=test bundle exec rake inkwell:install:migrations
    - bundle exec rake db:migrate
    - cd ../..
    - bundle exec rspec